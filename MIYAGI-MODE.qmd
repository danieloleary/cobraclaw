# ğŸŒ¿ MIYAGI-MODE.qmd

ğŸ”§ QMD TAGS: SKILL, MODE, SAFE-MIYAGI, DRY-RUN, COBRACLAW

---

## ğŸ¦€ Overview

**Miyagi Mode** is the antithesis of Cobra Mode. Where Cobra strikes first and hard, Miyagi Mode teaches patience, precision, and the wisdom of preparation. Use this mode for:
- **Dry-run operations** (test without executing)
- **Learning workflows** (verbose step-by-step)
- **Calm debugging** (no aggression, just breathing)
- **Safe experimentation** (protect the dojo from mistakes)

**Key Features:**
- ğŸŒ¿ Bonsai Green + White color palette
- ğŸ§˜ Calm, meditative messages
- ğŸ“– Verbose "wax on, wax off" step explanations
- ğŸ›¡ï¸ Sandbox protection enabled
- ğŸ§® No changes until explicitly confirmed

---

## ğŸ’¥ How It Works

### Activation Methods

| Method | Command | Effect |
|--------|---------|--------|
| **Flag** | `./cobraclaw.sh --miyagi-mode` | Full Miyagi experience |
| **Flag** | `./cobraclaw.sh --wax-on` | Verbose only (no dry-run) |
| **Toggle** | Toggle footer switch in web UI | Toggle between modes |
| **Interactive** | `miyagi()` function in CLI | Enter Miyagi Mode |

### Mode Comparison

| Aspect | Cobra Mode | Miyagi Mode |
|--------|-----------|-------------|
| **Palette** | Black/Yellow/Red | White/Green/Bonsai |
| **Messages** | "STRIKE FIRST!" | "Breathe. Think." |
| **Execution** | Immediate | Dry-run first |
| **Errors** | "DEFEAT!" | "Lesson learned." |
| **Speed** | Fast | Deliberate |
| **Purpose** | Conquer | Master |

### Banner Comparison

**Cobra Mode:**
```
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  
â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â•  
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•
ğŸ‘Š STRIKE FIRST. ğŸ’¥ STRIKE HARD. ğŸ¥Š NO MERCY. ğŸ‘Š
```

**Miyagi Mode:**
```
     â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
     â•‘     ğŸ¥‹ MIYAGI MODE ACTIVATED ğŸ¥‹       â•‘
     â•‘     "Wax on, wax off."               â•‘
     â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     
     ğŸŒ¿ Breathe. ğŸŒ¿
     ğŸ§˜ Observe. ğŸ§˜
     ğŸ“– Learn. ğŸ“–
```

---

## ğŸ¥‹ Implementation Notes

### Files Touched
- `miyagi-mode-qmd.md` (this file)
- `index.html` (toggle switch in footer)
- `dojo-functions.js` (miyagiMode functions)
- `test-skill.sh` (--miyagi-mode flag)
- `creed.yaml` (miyagi config)

### creed.yaml Additions

```yaml
miyagi_mode:
  enabled: true
  default_dry_run: true
  verbose_steps: true
  color_theme: "bonsai"  # green/white
  messages:
    welcome: "ğŸ¥‹ Miyagi Mode: 'Walk on road, hm? Always walk on road.'"
    dry_run: "ğŸ§˜ No changes yet. We are just breathing."
    confirm: "ğŸ›¡ï¸ Changes ready. Confirm to execute?"
    complete: "âœ¨ 'First learn walk, then learn run.' - Task complete."
  palette:
    background: "#FFFFFF"
    primary: "#2E7D32"  # Bonsai Green
    secondary: "#81C784"
    text: "#1B5E20"
```

### New Functions (dojo-functions.js)

```javascript
/**
 * Enter Miyagi Mode
 */
function enterMiyagiMode() {
  console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ğŸ¥‹ MIYAGI MODE ACTIVATED ğŸ¥‹       â•‘
â•‘     "Wax on, wax off."               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  `);
  
  return {
    mode: 'miyagi',
    dryRun: true,
    verbose: true,
    palette: 'bonsai'
  };
}

/**
 * Verbose step explanation (wax on)
 */
function waxOn(stepNumber, action, explanation) {
  console.log(`
ğŸ§˜ Step ${stepNumber}: ${action}
   "Wax on..." - ${explanation}
  `);
}

/**
 * Execute confirmed step (wax off)
 */
function waxOff(stepNumber, action) {
  console.log(`
âœ… Step ${stepNumber}: ${action}
   "Wax off." - Execution complete.
  `);
}

/**
 * Miyagi wisdom injection
 */
function miyagiWisdom() {
  const quotes = [
    '"Walk on road, hm? Always walk on road. You find end of road before you reach road if you dont."',
    '"First learn walk, then learn run."',
    '"Balance is not a place. It is a way of life."',
    '"Nothing is like it seems. Do not believe nose."',
    '"Jewel has many facets. One facet give whole jewel."',
    '"Face opponent with open mind. Eyes see only obstacle."'
  ];
  
  const random = quotes[Math.floor(Math.random() * quotes.length)];
  console.log(`\nğŸ¥‹ Miyagi wisdom: ${random}\n`);
}

/**
 * Confirm before execution
 */
function miyagiConfirm(actions) {
  console.log(`
ğŸ›¡ï¸ DRY RUN COMPLETE
${actions.length} steps prepared. Ready to execute?
  
"Master the basics. Then no enemy can defeat you."
  
[ENTER] to execute all  |  [n] to cancel
  `);
  
  // Returns promise for user input
}
```

### Shell Script Integration

```bash
#!/bin/bash
# Miyagi Mode - Calm, deliberate execution

MIYAGI_MODE=true
WAX_ON=false

for arg in "$@"; do
  case $arg in
    --miyagi-mode) MIYAGI_MODE=true ;;
    --wax-on) WAX_ON=true ;;
  esac
done

if [ "$MIYAGI_MODE" = true ] || [ "$WAX_ON" = true ]; then
  echo "ğŸ¥‹ MIYAGI MODE ACTIVATED"
  echo "ğŸŒ¿ 'Wax on, wax off.'"
  
  if [ "$MIYAGI_MODE" = true ]; then
    echo "ğŸ§˜ Dry-run enabled. No changes until confirmed."
  fi
  
  if [ "$WAX_ON" = true ]; then
    echo "ğŸ“– Verbose steps enabled. Learning mode active."
  fi
fi
```

---

## ğŸ¯ Usage Examples

### Before (Cobra Mode)
```bash
$ ./cobraclaw.sh "Delete all logs"
ğŸ’€ DELETING: /var/log/*.log
âœ… DONE. 47 files deleted.
```

### After (Miyagi Mode)
```bash
$ ./cobraclaw.sh --miyagi-mode "Delete all logs"

ğŸ§˜ Step 1: ANALYZE
   "Wax on..." - Identify files matching pattern /var/log/*.log
   
   Found 47 log files
   Total size: 2.3GB

ğŸ§˜ Step 2: PREPARE
   "Wax off..." - Deletion command constructed
   
   Command: rm /var/log/*.log
   
ğŸ›¡ï¸ DRY RUN COMPLETE
47 steps prepared. Ready to execute?

"Master the basics. Then no enemy can defeat you."

[ENTER] to execute all  |  [n] to cancel
> 
```

### Web UI Toggle

The footer now has a Miyagi Mode toggle:

```html
<div class="miyagi-toggle">
  <label class="switch">
    <input type="checkbox" id="miyagiMode" onchange="toggleMiyagiMode()">
    <span class="slider"></span>
  </label>
  <span class="toggle-label">ğŸ¥‹ Miyagi Mode (Wax On)</span>
  <span class="toggle-hint">--wax-on for verbose steps</span>
</div>
```

---

## ğŸ“– Cobra Kai Vibes

> "For you, strike first, strike hardâ€”no mercy. For me, always peace."
> â€” Mr. Miyagi

**Miyagi Mode Philosophy:**
```
ğŸ§˜ PEACE OVER WAR
   We don't fight; we train.

ğŸŒ± GROWTH OVER DEFEAT
   Every mistake is a lesson.

ğŸ“– WISDOM OVER SPEED
   "First learn walk, then learn run."

ğŸ›¡ï¸ PROTECTION OVER ATTACK
   Sandbox everything. Confirm everything.
```

**Cobra Mode Response to Miyagi:**
```
ğŸ¥‹ "Peace be with you, my friend."
ğŸ¦€ğŸ¥‹ "Peace is for the weak. Strike first!"
ğŸ¥‹ "Ah, yes. But sometimes... strike first later."
```

---

## ğŸ”„ Evolution Path

| Level | Miyagi Feature | Unlock |
|-------|----------------|--------|
| 1 | Basic dry-run | --miyagi-mode |
| 2 | Verbose steps | --wax-on |
| 3 | Interactive confirm | Default |
| 4 | Wisdom quotes | Every 3 steps |
| 5 | Bonsai visualization | Full Miyagi theme |

**Future Expansions:**
- `bonsai-qmd.md` - Visual bonsai tree that grows with victories
- `meditation-qmd.md` - Scheduled "breathing" pauses between tasks
- `balance-qmd.md` - Automatic switch between Cobra/Miyagi based on task type

---

## ğŸ”„ Test Strikes

### Manual Tests

```bash
# 1. Test Miyagi banner
./cobraclaw.sh --miyagi-mode

# 2. Test verbose mode
./cobraclaw.sh --wax-on "echo hello"

# 3. Test dry-run confirmation
./cobraclaw.sh --miyagi-mode "mkdir test"

# 4. Test wisdom injection
node dojo-functions.js test-wisdom

# 5. Test color switch
# Toggle in web UI footer
```

### test-skill.sh Reference

Update `test-skill.sh` to include:

```bash
# Miyagi Mode tests
if [ "$WAX_ON" = true ]; then
  echo "ğŸ¥‹ Miyagi Mode: Verbose steps active"
fi

if [ "$MIYAGI_MODE" = true ]; then
  echo "ğŸ§˜ Miyagi Mode: Dry-run enabled"
fi
```

---

## ğŸŒ¿ Complete

**QMD: MIYAGI MODE Added**
- ğŸŒ¿ Bonsai green/white color palette
- ğŸ§˜ Calm, meditative messages
- ğŸ“– Verbose "wax on, wax off" steps
- ğŸ›¡ï¸ Dry-run confirmation system
- ğŸ¥‹ Toggle between Cobra/Miyagi modes

**Commit:** `git commit -m "QMD: MIYAGI MODE - Bonsai palette, dry-run, verbose wax-on/wax-off - Strike Smart! ğŸ§˜"`

**Next:** Pre-emptive Strikes / Patrols QMD

---

**ğŸ§˜ "First learn walk, then learn run." Miyagi Mode ready. ğŸŒ¿**

# @qmd:tags=miyagi,mode,safe,dry-run,verbose,bonsai,cobraclaw
# @qmd:version=1.0
